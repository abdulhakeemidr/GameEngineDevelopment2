\hypertarget{_wave_bank_reader_8cpp_source}{}\doxysection{Wave\+Bank\+Reader.\+cpp}
\label{_wave_bank_reader_8cpp_source}\index{Week13/WaveBankReader.cpp@{Week13/WaveBankReader.cpp}}
\mbox{\hyperlink{_wave_bank_reader_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00001}00001 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00002}00002 \textcolor{comment}{// File: WaveBankReader.cpp}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00003}00003 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00004}00004 \textcolor{comment}{// Functions for loading audio data from Wave Banks}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00005}00005 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00007}\mbox{\hyperlink{_wave_bank_reader_8cpp_ac7bef5d85e3dcd73eef56ad39ffc84a9}{00007}} \textcolor{preprocessor}{\#define WIN32\_LEAN\_AND\_MEAN}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00008}00008 \textcolor{preprocessor}{\#include <Windows.h>}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00010}00010 \textcolor{preprocessor}{\#include <assert.h>}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00012}00012 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_wave_bank_reader_8h}{WaveBankReader.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00014}00014 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00015}00015 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00017}00017 \textcolor{preprocessor}{\#ifndef MAKEFOURCC}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00018}\mbox{\hyperlink{_wave_bank_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{00018}} \textcolor{preprocessor}{\#define MAKEFOURCC(ch0, ch1, ch2, ch3) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00019}00019 \textcolor{preprocessor}{                (static\_cast<uint32\_t>(static\_cast<uint8\_t>(ch0)) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00020}00020 \textcolor{preprocessor}{                | (static\_cast<uint32\_t>(static\_cast<uint8\_t>(ch1)) << 8) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00021}00021 \textcolor{preprocessor}{                | (static\_cast<uint32\_t>(static\_cast<uint8\_t>(ch2)) << 16) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00022}00022 \textcolor{preprocessor}{                | (static\_cast<uint32\_t>(static\_cast<uint8\_t>(ch3)) << 24))}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00023}00023 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* defined(MAKEFOURCC) */}\textcolor{preprocessor}{}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00025}00025 \textcolor{keyword}{namespace}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00026}00026 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00027}00027     \textcolor{keyword}{struct }handle\_closer \{ \textcolor{keywordtype}{void} operator()(HANDLE h) \textcolor{keyword}{noexcept} \{ \textcolor{keywordflow}{if} (h) CloseHandle(h); \} \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00029}00029     \textcolor{keyword}{using} ScopedHandle = std::unique\_ptr<void, handle\_closer>;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00031}00031     \textcolor{keyword}{inline} HANDLE safe\_handle(HANDLE h) \textcolor{keyword}{noexcept} \{ \textcolor{keywordflow}{return} (h == INVALID\_HANDLE\_VALUE) ? nullptr : h; \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00033}00033 \textcolor{preprocessor}{\#pragma pack(push, 1)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00035}00035     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} DVD\_SECTOR\_SIZE = 2048;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00036}00036     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} DVD\_BLOCK\_SIZE = DVD\_SECTOR\_SIZE * 16;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00038}00038     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} ALIGNMENT\_MIN = 4;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00039}00039     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} ALIGNMENT\_DVD = DVD\_SECTOR\_SIZE;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00041}00041     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} MAX\_DATA\_SEGMENT\_SIZE = 0xFFFFFFFF;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00042}00042     \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} MAX\_COMPACT\_DATA\_SEGMENT\_SIZE = 0x001FFFFF;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00044}00044     \textcolor{keyword}{struct }REGION}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00045}00045     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00046}00046         uint32\_t    dwOffset;   \textcolor{comment}{// Region offset, in bytes.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00047}00047         uint32\_t    dwLength;   \textcolor{comment}{// Region length, in bytes.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00048}00048     \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00050}00050     \textcolor{keyword}{struct }SAMPLEREGION}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00051}00051     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00052}00052         uint32\_t    dwStartSample;  \textcolor{comment}{// Start sample for the region.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00053}00053         uint32\_t    dwTotalSamples; \textcolor{comment}{// Region length in samples.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00054}00054     \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00056}00056     \textcolor{keyword}{struct }HEADER}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00057}00057     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00058}00058         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t SIGNATURE = \mbox{\hyperlink{_wave_bank_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'W'}, \textcolor{charliteral}{'B'}, \textcolor{charliteral}{'N'}, \textcolor{charliteral}{'D'});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00059}00059         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t BE\_SIGNATURE = \mbox{\hyperlink{_wave_bank_reader_8cpp_a706a9d1784b228428ecc412848c32d83}{MAKEFOURCC}}(\textcolor{charliteral}{'D'}, \textcolor{charliteral}{'N'}, \textcolor{charliteral}{'B'}, \textcolor{charliteral}{'W'});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00060}00060         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t VERSION = 44;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00061}00061 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00062}00062         \textcolor{keyword}{enum} SEGIDX}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00063}00063         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00064}00064             SEGIDX\_BANKDATA = 0,       \textcolor{comment}{// Bank data}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00065}00065             SEGIDX\_ENTRYMETADATA,      \textcolor{comment}{// Entry meta-\/data}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00066}00066             SEGIDX\_SEEKTABLES,         \textcolor{comment}{// Storage for seek tables for the encoded waves.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00067}00067             SEGIDX\_ENTRYNAMES,         \textcolor{comment}{// Entry friendly names}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00068}00068             SEGIDX\_ENTRYWAVEDATA,      \textcolor{comment}{// Entry wave data}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00069}00069             SEGIDX\_COUNT}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00070}00070         \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00072}00072         uint32\_t    dwSignature;            \textcolor{comment}{// File signature}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00073}00073         uint32\_t    dwVersion;              \textcolor{comment}{// Version of the tool that created the file}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00074}00074         uint32\_t    dwHeaderVersion;        \textcolor{comment}{// Version of the file format}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00075}00075         REGION      Segments[SEGIDX\_COUNT]; \textcolor{comment}{// Segment lookup table}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00076}00076     \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00077}00077 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00078}00078 \textcolor{preprocessor}{\#pragma warning( disable : 4201 4203 )}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00079}00079 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00080}00080     \textcolor{keyword}{union }MINIWAVEFORMAT}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00081}00081     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00082}00082         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t TAG\_PCM = 0x0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00083}00083         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t TAG\_XMA = 0x1;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00084}00084         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t TAG\_ADPCM = 0x2;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00085}00085         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t TAG\_WMA = 0x3;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00086}00086 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00087}00087         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t BITDEPTH\_8 = 0x0; \textcolor{comment}{// PCM only}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00088}00088         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t BITDEPTH\_16 = 0x1; \textcolor{comment}{// PCM only}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00089}00089 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00090}00090         \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} ADPCM\_BLOCKALIGN\_CONVERSION\_OFFSET = 22;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00092}00092         \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00093}00093         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00094}00094             uint32\_t       wFormatTag : 2;        \textcolor{comment}{// Format tag}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00095}00095             uint32\_t       nChannels : 3;        \textcolor{comment}{// Channel count (1 -\/ 6)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00096}00096             uint32\_t       nSamplesPerSec : 18;       \textcolor{comment}{// Sampling rate}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00097}00097             uint32\_t       wBlockAlign : 8;        \textcolor{comment}{// Block alignment.  For WMA, lower 6 bits block alignment index, upper 2 bits bytes-\/per-\/second index.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00098}00098             uint32\_t       wBitsPerSample : 1;        \textcolor{comment}{// Bits per sample (8 vs. 16, PCM only); WMAudio2/WMAudio3 (for WMA)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00099}00099         \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00100}00100 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00101}00101         uint32\_t           dwValue;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00102}00102 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00103}00103         WORD BitsPerSample() \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00104}00104         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00105}00105             \textcolor{keywordflow}{if} (wFormatTag == TAG\_XMA)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00106}00106                 \textcolor{keywordflow}{return} 16; \textcolor{comment}{// XMA\_OUTPUT\_SAMPLE\_BITS == 16}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00107}00107             \textcolor{keywordflow}{if} (wFormatTag == TAG\_WMA)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00108}00108                 \textcolor{keywordflow}{return} 16;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00109}00109             \textcolor{keywordflow}{if} (wFormatTag == TAG\_ADPCM)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00110}00110                 \textcolor{keywordflow}{return} 4; \textcolor{comment}{// MSADPCM\_BITS\_PER\_SAMPLE == 4}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00111}00111 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00112}00112             \textcolor{comment}{// wFormatTag must be TAG\_PCM (2 bits can only represent 4 different values)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00113}00113             \textcolor{keywordflow}{return} (wBitsPerSample == BITDEPTH\_16) ? 16u : 8u;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00114}00114         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00115}00115 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00116}00116         DWORD BlockAlign() \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00117}00117         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00118}00118             \textcolor{keywordflow}{switch} (wFormatTag)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00119}00119             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00120}00120                 \textcolor{keywordflow}{case} TAG\_PCM:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00121}00121                     \textcolor{keywordflow}{return} wBlockAlign;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00122}00122 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00123}00123                 \textcolor{keywordflow}{case} TAG\_XMA:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00124}00124                     \textcolor{keywordflow}{return} (nChannels * 16 / 8); \textcolor{comment}{// XMA\_OUTPUT\_SAMPLE\_BITS = 16}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00125}00125 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00126}00126                 \textcolor{keywordflow}{case} TAG\_ADPCM:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00127}00127                     \textcolor{keywordflow}{return} (wBlockAlign + ADPCM\_BLOCKALIGN\_CONVERSION\_OFFSET) * nChannels;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00128}00128 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00129}00129                 \textcolor{keywordflow}{case} TAG\_WMA:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00130}00130                 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00131}00131                     \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t aWMABlockAlign[] =}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00132}00132                     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00133}00133                         929,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00134}00134                         1487,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00135}00135                         1280,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00136}00136                         2230,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00137}00137                         8917,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00138}00138                         8192,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00139}00139                         4459,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00140}00140                         5945,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00141}00141                         2304,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00142}00142                         1536,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00143}00143                         1485,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00144}00144                         1008,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00145}00145                         2731,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00146}00146                         4096,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00147}00147                         6827,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00148}00148                         5462,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00149}00149                         1280}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00150}00150                     \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00151}00151 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00152}00152                     uint32\_t dwBlockAlignIndex = wBlockAlign \& 0x1F;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00153}00153                     \textcolor{keywordflow}{if} (dwBlockAlignIndex < \_countof(aWMABlockAlign))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00154}00154                         \textcolor{keywordflow}{return} aWMABlockAlign[dwBlockAlignIndex];}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00155}00155                 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00156}00156                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00157}00157             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00158}00158 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00159}00159             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00160}00160         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00161}00161 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00162}00162         DWORD AvgBytesPerSec() \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00163}00163         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00164}00164             \textcolor{keywordflow}{switch} (wFormatTag)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00165}00165             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00166}00166                 \textcolor{keywordflow}{case} TAG\_PCM:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00167}00167                     \textcolor{keywordflow}{return} nSamplesPerSec * wBlockAlign;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00168}00168 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00169}00169                 \textcolor{keywordflow}{case} TAG\_XMA:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00170}00170                     \textcolor{keywordflow}{return} nSamplesPerSec * BlockAlign();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00171}00171 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00172}00172                 \textcolor{keywordflow}{case} TAG\_ADPCM:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00173}00173                 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00174}00174                     uint32\_t blockAlign = BlockAlign();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00175}00175                     uint32\_t samplesPerAdpcmBlock = AdpcmSamplesPerBlock();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00176}00176                     \textcolor{keywordflow}{return} blockAlign * nSamplesPerSec / samplesPerAdpcmBlock;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00177}00177                 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00178}00178 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00179}00179                 \textcolor{keywordflow}{case} TAG\_WMA:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00180}00180                 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00181}00181                     \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t aWMAAvgBytesPerSec[] =}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00182}00182                     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00183}00183                         12000,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00184}00184                         24000,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00185}00185                         4000,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00186}00186                         6000,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00187}00187                         8000,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00188}00188                         20000,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00189}00189                         2500}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00190}00190                     \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00191}00191                     \textcolor{comment}{// bitrate = entry * 8}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00192}00192 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00193}00193                     uint32\_t dwBytesPerSecIndex = wBlockAlign >> 5;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00194}00194                     \textcolor{keywordflow}{if} (dwBytesPerSecIndex < \_countof(aWMAAvgBytesPerSec))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00195}00195                         \textcolor{keywordflow}{return} aWMAAvgBytesPerSec[dwBytesPerSecIndex];}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00196}00196                 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00197}00197                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00198}00198             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00199}00199 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00200}00200             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00201}00201         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00202}00202 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00203}00203         DWORD AdpcmSamplesPerBlock() \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00204}00204         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00205}00205             uint32\_t nBlockAlign = (wBlockAlign + ADPCM\_BLOCKALIGN\_CONVERSION\_OFFSET) * nChannels;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00206}00206             \textcolor{keywordflow}{return} nBlockAlign * 2 / uint32\_t(nChannels) -\/ 12;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00207}00207         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00208}00208 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00209}00209         \textcolor{keywordtype}{void} AdpcmFillCoefficientTable(ADPCMWAVEFORMAT *fmt) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00210}00210         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00211}00211             \textcolor{comment}{// These are fixed since we are always using MS ADPCM}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00212}00212             fmt-\/>wNumCoef = 7 \textcolor{comment}{/* MSADPCM\_NUM\_COEFFICIENTS */};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00213}00213 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00214}00214             \textcolor{keyword}{static} ADPCMCOEFSET aCoef[7] = \{ \{ 256, 0\}, \{512, -\/256\}, \{0,0\}, \{192,64\}, \{240,0\}, \{460, -\/208\}, \{392,-\/232\} \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00215}00215             memcpy(\&fmt-\/>aCoef, aCoef, \textcolor{keyword}{sizeof}(aCoef));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00216}00216         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00217}00217     \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00218}00218 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00219}00219     \textcolor{keyword}{struct }BANKDATA}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00220}00220     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00221}00221         \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} BANKNAME\_LENGTH = 64;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00222}00222 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00223}00223         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t TYPE\_BUFFER = 0x00000000;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00224}00224         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t TYPE\_STREAMING = 0x00000001;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00225}00225         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t TYPE\_MASK = 0x00000001;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00226}00226 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00227}00227         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t FLAGS\_ENTRYNAMES = 0x00010000;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00228}00228         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t FLAGS\_COMPACT = 0x00020000;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00229}00229         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t FLAGS\_SYNC\_DISABLED = 0x00040000;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00230}00230         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t FLAGS\_SEEKTABLES = 0x00080000;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00231}00231         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t FLAGS\_MASK = 0x000F0000;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00232}00232 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00233}00233         uint32\_t        dwFlags;                        \textcolor{comment}{// Bank flags}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00234}00234         uint32\_t        dwEntryCount;                   \textcolor{comment}{// Number of entries in the bank}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00235}00235         \textcolor{keywordtype}{char}            szBankName[BANKNAME\_LENGTH];    \textcolor{comment}{// Bank friendly name}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00236}00236         uint32\_t        dwEntryMetaDataElementSize;     \textcolor{comment}{// Size of each entry meta-\/data element, in bytes}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00237}00237         uint32\_t        dwEntryNameElementSize;         \textcolor{comment}{// Size of each entry name element, in bytes}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00238}00238         uint32\_t        dwAlignment;                    \textcolor{comment}{// Entry alignment, in bytes}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00239}00239         MINIWAVEFORMAT  CompactFormat;                  \textcolor{comment}{// Format data for compact bank}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00240}00240         FILETIME        BuildTime;                      \textcolor{comment}{// Build timestamp}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00241}00241     \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00242}00242 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00243}00243     \textcolor{keyword}{struct }ENTRY}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00244}00244     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00245}00245         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t FLAGS\_READAHEAD = 0x00000001;     \textcolor{comment}{// Enable stream read-\/ahead}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00246}00246         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t FLAGS\_LOOPCACHE = 0x00000002;     \textcolor{comment}{// One or more looping sounds use this wave}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00247}00247         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t FLAGS\_REMOVELOOPTAIL = 0x00000004;\textcolor{comment}{// Remove data after the end of the loop region}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00248}00248         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t FLAGS\_IGNORELOOP = 0x00000008;    \textcolor{comment}{// Used internally when the loop region can't be used}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00249}00249         \textcolor{keyword}{static} \textcolor{keyword}{const} uint32\_t FLAGS\_MASK = 0x00000008;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00250}00250 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00251}00251         \textcolor{keyword}{union}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00252}00252         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00253}00253             \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00254}00254             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00255}00255                 \textcolor{comment}{// Entry flags}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00256}00256                 uint32\_t                   dwFlags : 4;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00257}00257 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00258}00258                 \textcolor{comment}{// Duration of the wave, in units of one sample.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00259}00259                 \textcolor{comment}{// For instance, a ten second long wave sampled}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00260}00260                 \textcolor{comment}{// at 48KHz would have a duration of 480,000.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00261}00261                 \textcolor{comment}{// This value is not affected by the number of}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00262}00262                 \textcolor{comment}{// channels, the number of bits per sample, or the}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00263}00263                 \textcolor{comment}{// compression format of the wave.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00264}00264                 uint32\_t                   Duration : 28;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00265}00265             \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00266}00266             uint32\_t dwFlagsAndDuration;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00267}00267         \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00268}00268 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00269}00269         MINIWAVEFORMAT  Format;         \textcolor{comment}{// Entry format.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00270}00270         REGION          PlayRegion;     \textcolor{comment}{// Region within the wave data segment that contains this entry.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00271}00271         SAMPLEREGION    LoopRegion;     \textcolor{comment}{// Region within the wave data (in samples) that should loop.}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00272}00272     \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00273}00273 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00274}00274     \textcolor{keyword}{struct }ENTRYCOMPACT}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00275}00275     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00276}00276         uint32\_t       dwOffset : 21;       \textcolor{comment}{// Data offset, in multiplies of the bank alignment}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00277}00277         uint32\_t       dwLengthDeviation : 11;       \textcolor{comment}{// Data length deviation, in bytes}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00278}00278 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00279}00279         \textcolor{keywordtype}{void} ComputeLocations(DWORD\& offset, DWORD\& \mbox{\hyperlink{_week11_2_week11-_demo1-_game_over_2_include_2_utility_8hpp_a658e7a578e1b8e49820b0691fd6993d6}{length}}, uint32\_t index, \textcolor{keyword}{const} HEADER\& header, \textcolor{keyword}{const} BANKDATA\& data, \textcolor{keyword}{const} ENTRYCOMPACT* entries) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00280}00280         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00281}00281             offset = dwOffset * data.dwAlignment;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00282}00282 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00283}00283             \textcolor{keywordflow}{if} (index < (data.dwEntryCount -\/ 1))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00284}00284             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00285}00285                 \mbox{\hyperlink{_week11_2_week11-_demo1-_game_over_2_include_2_utility_8hpp_a658e7a578e1b8e49820b0691fd6993d6}{length}} = (entries[index + 1].dwOffset * data.dwAlignment) -\/ offset -\/ dwLengthDeviation;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00286}00286             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00287}00287             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00288}00288             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00289}00289                 \mbox{\hyperlink{_week11_2_week11-_demo1-_game_over_2_include_2_utility_8hpp_a658e7a578e1b8e49820b0691fd6993d6}{length}} = header.Segments[HEADER::SEGIDX\_ENTRYWAVEDATA].dwLength -\/ offset -\/ dwLengthDeviation;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00290}00290             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00291}00291         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00292}00292 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00293}00293         \textcolor{keyword}{static} uint32\_t GetDuration(DWORD \mbox{\hyperlink{_week11_2_week11-_demo1-_game_over_2_include_2_utility_8hpp_a658e7a578e1b8e49820b0691fd6993d6}{length}}, \textcolor{keyword}{const} BANKDATA\& data, \textcolor{keyword}{const} uint32\_t* seekTable) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00294}00294         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00295}00295             \textcolor{keywordflow}{switch} (data.CompactFormat.wFormatTag)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00296}00296             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00297}00297                 \textcolor{keywordflow}{case} MINIWAVEFORMAT::TAG\_ADPCM:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00298}00298                 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00299}00299                     uint32\_t duration = (\mbox{\hyperlink{_week11_2_week11-_demo1-_game_over_2_include_2_utility_8hpp_a658e7a578e1b8e49820b0691fd6993d6}{length}} / data.CompactFormat.BlockAlign()) * data.CompactFormat.AdpcmSamplesPerBlock();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00300}00300                     uint32\_t partial = \mbox{\hyperlink{_week11_2_week11-_demo1-_game_over_2_include_2_utility_8hpp_a658e7a578e1b8e49820b0691fd6993d6}{length}} \% data.CompactFormat.BlockAlign();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00301}00301                     \textcolor{keywordflow}{if} (partial)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00302}00302                     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00303}00303                         \textcolor{keywordflow}{if} (partial >= (7u * data.CompactFormat.nChannels))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00304}00304                             duration += (partial * 2 / data.CompactFormat.nChannels -\/ 12);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00305}00305                     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00306}00306                     \textcolor{keywordflow}{return} duration;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00307}00307                 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00308}00308 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00309}00309                 \textcolor{keywordflow}{case} MINIWAVEFORMAT::TAG\_WMA:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00310}00310                     \textcolor{keywordflow}{if} (seekTable)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00311}00311                     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00312}00312                         uint32\_t seekCount = *seekTable;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00313}00313                         \textcolor{keywordflow}{if} (seekCount > 0)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00314}00314                         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00315}00315                             \textcolor{keywordflow}{return} seekTable[seekCount] / uint32\_t(2 * data.CompactFormat.nChannels);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00316}00316                         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00317}00317                     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00318}00318                     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00319}00319 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00320}00320                 \textcolor{keywordflow}{case} MINIWAVEFORMAT::TAG\_XMA:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00321}00321                     \textcolor{keywordflow}{if} (seekTable)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00322}00322                     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00323}00323                         uint32\_t seekCount = *seekTable;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00324}00324                         \textcolor{keywordflow}{if} (seekCount > 0)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00325}00325                         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00326}00326                             \textcolor{keywordflow}{return} seekTable[seekCount];}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00327}00327                         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00328}00328                     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00329}00329                     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00330}00330 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00331}00331                 \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00332}00332                     \textcolor{keywordflow}{return} uint32\_t((uint64\_t(\mbox{\hyperlink{_week11_2_week11-_demo1-_game_over_2_include_2_utility_8hpp_a658e7a578e1b8e49820b0691fd6993d6}{length}}) * 8)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00333}00333                         / (uint64\_t(data.CompactFormat.BitsPerSample()) * uint64\_t(data.CompactFormat.nChannels)));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00334}00334             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00335}00335         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00336}00336     \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00337}00337 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00338}00338 \textcolor{preprocessor}{\#pragma pack(pop)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00339}00339 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00340}00340     \textcolor{keyword}{inline} \textcolor{keyword}{const} uint32\_t* FindSeekTable(uint32\_t index, \textcolor{keyword}{const} uint8\_t* seekTable, \textcolor{keyword}{const} HEADER\& header, \textcolor{keyword}{const} BANKDATA\& data) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00341}00341     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00342}00342         \textcolor{keywordflow}{if} (!seekTable || index >= data.dwEntryCount)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00343}00343             \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00344}00344 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00345}00345         uint32\_t seekSize = header.Segments[HEADER::SEGIDX\_SEEKTABLES].dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00346}00346 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00347}00347         \textcolor{keywordflow}{if} ((index * \textcolor{keyword}{sizeof}(uint32\_t)) > seekSize)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00348}00348             \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00349}00349 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00350}00350         \textcolor{keyword}{auto} table = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint32\_t*\textcolor{keyword}{>}(seekTable);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00351}00351         uint32\_t offset = table[index];}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00352}00352         \textcolor{keywordflow}{if} (offset == uint32\_t(-\/1))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00353}00353             \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00354}00354 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00355}00355         offset += \textcolor{keyword}{sizeof}(uint32\_t) * data.dwEntryCount;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00356}00356 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00357}00357         if (offset > seekSize)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00358}00358             \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00359}00359 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00360}00360         \textcolor{keywordflow}{return} \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint32\_t*\textcolor{keyword}{>}(seekTable + offset);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00361}00361     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00362}00362 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00363}00363 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00364}00364 \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(REGION) == 8, \textcolor{stringliteral}{"{}Mismatch with xact3wb.h"{}});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00365}00365 \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(SAMPLEREGION) == 8, \textcolor{stringliteral}{"{}Mismatch with xact3wb.h"{}});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00366}00366 \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(HEADER) == 52, \textcolor{stringliteral}{"{}Mismatch with xact3wb.h"{}});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00367}00367 \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(ENTRY) == 24, \textcolor{stringliteral}{"{}Mismatch with xact3wb.h"{}});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00368}00368 \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(MINIWAVEFORMAT) == 4, \textcolor{stringliteral}{"{}Mismatch with xact3wb.h"{}});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00369}00369 \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(ENTRY) == 24, \textcolor{stringliteral}{"{}Mismatch with xact3wb.h"{}});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00370}00370 \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(ENTRYCOMPACT) == 4, \textcolor{stringliteral}{"{}Mismatch with xact3wb.h"{}});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00371}00371 \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(BANKDATA) == 96, \textcolor{stringliteral}{"{}Mismatch with xact3wb.h"{}});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00372}00372 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00373}00373 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_direct_x}{DirectX}};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00374}00374 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00375}00375 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00376}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl}{00376}} \textcolor{keyword}{class }\mbox{\hyperlink{class_wave_bank_reader_1_1_impl}{WaveBankReader::Impl}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00377}00377 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00378}00378 \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00379}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a008a2f869a20694e680c051ef75a949e}{00379}}     \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a008a2f869a20694e680c051ef75a949e}{Impl}}() noexcept :}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00380}00380         \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ab8f389a1facf854c0f4732dc13ec367e}{m\_async}}(INVALID\_HANDLE\_VALUE),}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00381}00381         \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a3d37a0db5d9e58a48b896bd4ef8fe13c}{m\_request}}\{\},}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00382}00382         \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a9e75ee6e869da6ffebb1178ea6cec3ea}{m\_prepared}}(\textcolor{keyword}{false}),}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00383}00383         \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a6049cfcc1c1c5e6cae8d57ef3671fe3d}{m\_header}}\{\},}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00384}00384         \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a67df206186ec44d748c0ee8e445dc74b}{m\_data}}\{\}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00385}00385     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00386}00386     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00387}00387 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00388}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a01a2f10e6eda89f37affefb6da699155}{00388}}     \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a01a2f10e6eda89f37affefb6da699155}{Impl}}(\mbox{\hyperlink{class_wave_bank_reader_1_1_impl}{Impl}}\&\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00389}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a433352975376076ae74a9f9ef2eb891a}{00389}}     \mbox{\hyperlink{class_wave_bank_reader_1_1_impl}{Impl}}\& \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a433352975376076ae74a9f9ef2eb891a}{operator= }}(\mbox{\hyperlink{class_wave_bank_reader_1_1_impl}{Impl}}\&\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00390}00390 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00391}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a80a89cc50e7d1437e35137f0eed89edb}{00391}}     \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a80a89cc50e7d1437e35137f0eed89edb}{Impl}}(\mbox{\hyperlink{class_wave_bank_reader_1_1_impl}{Impl}} \textcolor{keyword}{const}\&) = \textcolor{keyword}{delete};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00392}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_aac1686b7eca5df9f50b5d8c9a6a20739}{00392}}     \mbox{\hyperlink{class_wave_bank_reader_1_1_impl}{Impl}}\& \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a433352975376076ae74a9f9ef2eb891a}{operator= }}(\mbox{\hyperlink{class_wave_bank_reader_1_1_impl}{Impl}} \textcolor{keyword}{const}\&) = \textcolor{keyword}{delete};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00393}00393 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00394}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ad669451a36724ad4974342f140de30a4}{00394}}     \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ad669451a36724ad4974342f140de30a4}{\string~Impl}}() \{ \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a6562002e1eb7adbbf79abf81f0cc7296}{Close}}(); \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00395}00395 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00396}00396     HRESULT \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ae786ae7c68c344b56e9fa7901a62a6fb}{Open}}(\_In\_z\_ \textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* szFileName) \textcolor{keyword}{noexcept}(\textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00397}00397     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a6562002e1eb7adbbf79abf81f0cc7296}{Close}}() noexcept;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00398}00398 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00399}00399     HRESULT \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a97c95839347c8e53ee541021d718b967}{GetFormat}}(\_In\_ uint32\_t index, \_Out\_writes\_bytes\_(maxsize) WAVEFORMATEX* pFormat, \_In\_ \textcolor{keywordtype}{size\_t} maxsize) const noexcept;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00400}00400 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00401}00401     HRESULT \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a36f2ebfa1756a997d2627c8e5039d822}{GetWaveData}}(\_In\_ uint32\_t index, \_Outptr\_ const uint8\_t** pData, \_Out\_ uint32\_t\& dataSize) const noexcept;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00402}00402 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00403}00403     HRESULT \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ad18bb2b866fad22bdf54ab4748a5f5b5}{GetSeekTable}}(\_In\_ uint32\_t index, \_Out\_ const uint32\_t** pData, \_Out\_ uint32\_t\& dataCount, \_Out\_ uint32\_t\& tag) const noexcept;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00404}00404 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00405}00405     HRESULT \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a2df251e4ec08b21f4197648a539cbbaa}{GetMetadata}}(\_In\_ uint32\_t index, \_Out\_ \mbox{\hyperlink{struct_direct_x_1_1_wave_bank_reader_1_1_metadata}{Metadata}}\& metadata) const noexcept;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00406}00406 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00407}00407     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a8346f9a62338fd734672d89dc9cc6007}{UpdatePrepared}}() noexcept;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00408}00408 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00409}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a17913d959f6b1a588b02f942117b56be}{00409}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a17913d959f6b1a588b02f942117b56be}{Clear}}() noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00410}00410     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00411}00411         memset(\&\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a6049cfcc1c1c5e6cae8d57ef3671fe3d}{m\_header}}, 0, \textcolor{keyword}{sizeof}(HEADER));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00412}00412         memset(\&\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a67df206186ec44d748c0ee8e445dc74b}{m\_data}}, 0, \textcolor{keyword}{sizeof}(BANKDATA));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00413}00413 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00414}00414         \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a30297e6512c5cfa4d6c8225c01a5a079}{m\_names}}.clear();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00415}00415         m\_entries.reset();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00416}00416         m\_seekData.reset();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00417}00417         m\_waveData.reset();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00418}00418     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00419}00419 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00420}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ab8f389a1facf854c0f4732dc13ec367e}{00420}}     HANDLE                              \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ab8f389a1facf854c0f4732dc13ec367e}{m\_async}};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00421}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_adf56e31e39352f85d3f913f08e0cfc3b}{00421}}     ScopedHandle                        \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_adf56e31e39352f85d3f913f08e0cfc3b}{m\_event}};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00422}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a3d37a0db5d9e58a48b896bd4ef8fe13c}{00422}}     OVERLAPPED                          \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a3d37a0db5d9e58a48b896bd4ef8fe13c}{m\_request}};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00423}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a9e75ee6e869da6ffebb1178ea6cec3ea}{00423}}     \textcolor{keywordtype}{bool}                                \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a9e75ee6e869da6ffebb1178ea6cec3ea}{m\_prepared}};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00424}00424 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00425}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a6049cfcc1c1c5e6cae8d57ef3671fe3d}{00425}}     HEADER                              \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a6049cfcc1c1c5e6cae8d57ef3671fe3d}{m\_header}};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00426}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a67df206186ec44d748c0ee8e445dc74b}{00426}}     BANKDATA                            \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a67df206186ec44d748c0ee8e445dc74b}{m\_data}};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00427}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a30297e6512c5cfa4d6c8225c01a5a079}{00427}}     std::map<std::string, uint32\_t>     \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a30297e6512c5cfa4d6c8225c01a5a079}{m\_names}};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00428}00428 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00429}00429 \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00430}00430     std::unique\_ptr<uint8\_t[]>          m\_entries;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00431}00431     std::unique\_ptr<uint8\_t[]>          m\_seekData;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00432}00432     std::unique\_ptr<uint8\_t[]>          m\_waveData;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00433}00433 \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00434}00434 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00435}00435 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00436}00436 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00437}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ae786ae7c68c344b56e9fa7901a62a6fb}{00437}} HRESULT \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ae786ae7c68c344b56e9fa7901a62a6fb}{WaveBankReader::Impl::Open}}(\textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* szFileName) \textcolor{keyword}{noexcept}(\textcolor{keyword}{false})}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00438}00438 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00439}00439     \mbox{\hyperlink{group__window_ggaa75e94f0d3f52da8a61ed467ffd6d6e8a76bbd82b28e359cc0feec9e5ec123b40}{Close}}();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00440}00440     Clear();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00441}00441 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00442}00442     m\_prepared = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00443}00443 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00444}00444     m\_event.reset(CreateEventEx(\textcolor{keyword}{nullptr}, \textcolor{keyword}{nullptr}, CREATE\_EVENT\_MANUAL\_RESET, EVENT\_MODIFY\_STATE | SYNCHRONIZE));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00445}00445     \textcolor{keywordflow}{if} (!m\_event)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00446}00446     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00447}00447         \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00448}00448     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00449}00449 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00450}00450 \textcolor{preprocessor}{\#if (\_WIN32\_WINNT >= \_WIN32\_WINNT\_WIN8)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00451}00451     CREATEFILE2\_EXTENDED\_PARAMETERS params = \{ \textcolor{keyword}{sizeof}(CREATEFILE2\_EXTENDED\_PARAMETERS), 0, 0, 0, \{\}, \textcolor{keyword}{nullptr} \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00452}00452     params.dwFileAttributes = FILE\_ATTRIBUTE\_NORMAL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00453}00453     params.dwFileFlags = FILE\_FLAG\_OVERLAPPED | FILE\_FLAG\_SEQUENTIAL\_SCAN;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00454}00454     ScopedHandle hFile(safe\_handle(CreateFile2(szFileName,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00455}00455                        GENERIC\_READ,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00456}00456                        FILE\_SHARE\_READ,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00457}00457                        OPEN\_EXISTING,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00458}00458                        \&params)));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00459}00459 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00460}00460     ScopedHandle hFile(safe\_handle(CreateFileW(szFileName,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00461}00461                        GENERIC\_READ,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00462}00462                        FILE\_SHARE\_READ,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00463}00463                        \textcolor{keyword}{nullptr},}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00464}00464                        OPEN\_EXISTING,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00465}00465                        FILE\_FLAG\_OVERLAPPED | FILE\_FLAG\_SEQUENTIAL\_SCAN,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00466}00466                        \textcolor{keyword}{nullptr})));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00467}00467 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00468}00468 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00469}00469     \textcolor{keywordflow}{if} (!hFile)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00470}00470     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00471}00471         \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00472}00472     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00473}00473 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00474}00474     \textcolor{comment}{// Read and verify header}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00475}00475     OVERLAPPED request = \{\};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00476}00476     request.hEvent = m\_event.get();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00477}00477 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00478}00478     \textcolor{keywordtype}{bool} wait = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00479}00479     \textcolor{keywordflow}{if} (!ReadFile(hFile.get(), \&m\_header, \textcolor{keyword}{sizeof}(m\_header), \textcolor{keyword}{nullptr}, \&request))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00480}00480     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00481}00481         DWORD error = GetLastError();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00482}00482         \textcolor{keywordflow}{if} (error != ERROR\_IO\_PENDING)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00483}00483             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(error);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00484}00484         wait = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00485}00485     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00486}00486 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00487}00487     DWORD bytes;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00488}00488 \textcolor{preprocessor}{\#if (\_WIN32\_WINNT >= \_WIN32\_WINNT\_WIN8)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00489}00489     BOOL result = GetOverlappedResultEx(hFile.get(), \&request, \&bytes, INFINITE, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00490}00490 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00491}00491     \textcolor{keywordflow}{if} (wait)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00492}00492         (void)WaitForSingleObject(m\_event.get(), INFINITE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00493}00493 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00494}00494     BOOL result = GetOverlappedResult(hFile.get(), \&request, \&bytes, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00495}00495 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00496}00496 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00497}00497     \textcolor{keywordflow}{if} (!result || (bytes != \textcolor{keyword}{sizeof}(m\_header)))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00498}00498     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00499}00499         \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00500}00500     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00501}00501 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00502}00502     \textcolor{keywordflow}{if} (m\_header.dwSignature != HEADER::SIGNATURE \&\& m\_header.dwSignature != HEADER::BE\_SIGNATURE)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00503}00503     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00504}00504         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00505}00505     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00506}00506 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00507}00507     \textcolor{keywordtype}{bool} be = (m\_header.dwSignature == HEADER::BE\_SIGNATURE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00508}00508     \textcolor{keywordflow}{if} (be)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00509}00509     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00510}00510         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00511}00511     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00512}00512 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00513}00513     \textcolor{keywordflow}{if} (m\_header.dwHeaderVersion != HEADER::VERSION)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00514}00514     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00515}00515         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00516}00516     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00517}00517 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00518}00518     \textcolor{comment}{// Load bank data}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00519}00519     memset(\&request, 0, \textcolor{keyword}{sizeof}(request));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00520}00520     request.Offset = m\_header.Segments[HEADER::SEGIDX\_BANKDATA].dwOffset;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00521}00521     request.hEvent = m\_event.get();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00522}00522 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00523}00523     wait = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00524}00524     \textcolor{keywordflow}{if} (!ReadFile(hFile.get(), \&m\_data, \textcolor{keyword}{sizeof}(m\_data), \textcolor{keyword}{nullptr}, \&request))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00525}00525     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00526}00526         DWORD error = GetLastError();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00527}00527         \textcolor{keywordflow}{if} (error != ERROR\_IO\_PENDING)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00528}00528             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(error);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00529}00529         wait = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00530}00530     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00531}00531 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00532}00532 \textcolor{preprocessor}{\#if (\_WIN32\_WINNT >= \_WIN32\_WINNT\_WIN8)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00533}00533     result = GetOverlappedResultEx(hFile.get(), \&request, \&bytes, INFINITE, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00534}00534 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00535}00535     \textcolor{keywordflow}{if} (wait)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00536}00536         (void)WaitForSingleObject(m\_event.get(), INFINITE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00537}00537 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00538}00538     result = GetOverlappedResult(hFile.get(), \&request, \&bytes, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00539}00539 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00540}00540 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00541}00541     \textcolor{keywordflow}{if} (!result || (bytes != \textcolor{keyword}{sizeof}(m\_data)))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00542}00542     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00543}00543         \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00544}00544     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00545}00545 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00546}00546     \textcolor{keywordflow}{if} (!m\_data.dwEntryCount)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00547}00547     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00548}00548         \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_NO\_DATA);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00549}00549     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00550}00550 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00551}00551     \textcolor{keywordflow}{if} (m\_data.dwFlags \& BANKDATA::TYPE\_STREAMING)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00552}00552     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00553}00553         \textcolor{keywordflow}{if} (m\_data.dwAlignment < ALIGNMENT\_DVD)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00554}00554             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00555}00555         \textcolor{keywordflow}{if} (m\_data.dwAlignment \% DVD\_SECTOR\_SIZE)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00556}00556             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00557}00557     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00558}00558     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_data.dwAlignment < ALIGNMENT\_MIN)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00559}00559     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00560}00560         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00561}00561     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00562}00562 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00563}00563     \textcolor{keywordflow}{if} (m\_data.dwFlags \& BANKDATA::FLAGS\_COMPACT)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00564}00564     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00565}00565         \textcolor{keywordflow}{if} (m\_data.dwEntryMetaDataElementSize != \textcolor{keyword}{sizeof}(ENTRYCOMPACT))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00566}00566         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00567}00567             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00568}00568         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00569}00569 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00570}00570         \textcolor{keywordflow}{if} (m\_header.Segments[HEADER::SEGIDX\_ENTRYWAVEDATA].dwLength > (MAX\_COMPACT\_DATA\_SEGMENT\_SIZE * m\_data.dwAlignment))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00571}00571         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00572}00572             \textcolor{comment}{// Data segment is too large to be valid compact wavebank}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00573}00573             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00574}00574         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00575}00575     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00576}00576     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00577}00577     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00578}00578         \textcolor{keywordflow}{if} (m\_data.dwEntryMetaDataElementSize != \textcolor{keyword}{sizeof}(ENTRY))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00579}00579         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00580}00580             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00581}00581         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00582}00582     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00583}00583 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00584}00584     DWORD metadataBytes = m\_header.Segments[HEADER::SEGIDX\_ENTRYMETADATA].dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00585}00585     \textcolor{keywordflow}{if} (metadataBytes != (m\_data.dwEntryCount * m\_data.dwEntryMetaDataElementSize))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00586}00586     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00587}00587         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00588}00588     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00589}00589 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00590}00590     \textcolor{comment}{// Load names}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00591}00591     DWORD namesBytes = m\_header.Segments[HEADER::SEGIDX\_ENTRYNAMES].dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00592}00592     \textcolor{keywordflow}{if} (namesBytes > 0)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00593}00593     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00594}00594         \textcolor{keywordflow}{if} (namesBytes >= (m\_data.dwEntryNameElementSize * m\_data.dwEntryCount))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00595}00595         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00596}00596             std::unique\_ptr<char[]> temp(\textcolor{keyword}{new} (std::nothrow) \textcolor{keywordtype}{char}[namesBytes]);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00597}00597             \textcolor{keywordflow}{if} (!temp)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00598}00598                 \textcolor{keywordflow}{return} E\_OUTOFMEMORY;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00599}00599 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00600}00600             memset(\&request, 0, \textcolor{keyword}{sizeof}(request));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00601}00601             request.Offset = m\_header.Segments[HEADER::SEGIDX\_ENTRYNAMES].dwOffset;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00602}00602             request.hEvent = m\_event.get();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00603}00603 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00604}00604             wait = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00605}00605             \textcolor{keywordflow}{if} (!ReadFile(hFile.get(), temp.get(), namesBytes, \textcolor{keyword}{nullptr}, \&request))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00606}00606             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00607}00607                 DWORD error = GetLastError();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00608}00608                 \textcolor{keywordflow}{if} (error != ERROR\_IO\_PENDING)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00609}00609                     \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(error);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00610}00610                 wait = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00611}00611             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00612}00612 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00613}00613 \textcolor{preprocessor}{        \#if (\_WIN32\_WINNT >= \_WIN32\_WINNT\_WIN8)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00614}00614             result = GetOverlappedResultEx(hFile.get(), \&request, \&bytes, INFINITE, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00615}00615 \textcolor{preprocessor}{        \#else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00616}00616             \textcolor{keywordflow}{if} (wait)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00617}00617                 (void)WaitForSingleObject(m\_event.get(), INFINITE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00618}00618 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00619}00619             result = GetOverlappedResult(hFile.get(), \&request, \&bytes, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00620}00620 \textcolor{preprocessor}{        \#endif}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00621}00621 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00622}00622             \textcolor{keywordflow}{if} (!result || (namesBytes != bytes))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00623}00623             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00624}00624                 \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00625}00625             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00626}00626 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00627}00627             \textcolor{keywordflow}{for} (uint32\_t j = 0; j < m\_data.dwEntryCount; ++j)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00628}00628             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00629}00629                 DWORD n = m\_data.dwEntryNameElementSize * j;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00630}00630 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00631}00631                 \textcolor{keywordtype}{char} name[64] = \{\};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00632}00632                 strncpy\_s(name, \&temp[n], \textcolor{keyword}{sizeof}(name));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00633}00633 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00634}00634                 m\_names[name] = j;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00635}00635             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00636}00636         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00637}00637     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00638}00638 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00639}00639     \textcolor{comment}{// Load entries}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00640}00640     \textcolor{keywordflow}{if} (m\_data.dwFlags \& BANKDATA::FLAGS\_COMPACT)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00641}00641     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00642}00642         m\_entries.reset(\textcolor{keyword}{reinterpret\_cast<}uint8\_t*\textcolor{keyword}{>}(\textcolor{keyword}{new} (std::nothrow) ENTRYCOMPACT[m\_data.dwEntryCount]));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00643}00643     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00644}00644     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00645}00645     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00646}00646         m\_entries.reset(\textcolor{keyword}{reinterpret\_cast<}uint8\_t*\textcolor{keyword}{>}(\textcolor{keyword}{new} (std::nothrow) ENTRY[m\_data.dwEntryCount]));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00647}00647     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00648}00648     \textcolor{keywordflow}{if} (!m\_entries)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00649}00649         \textcolor{keywordflow}{return} E\_OUTOFMEMORY;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00650}00650 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00651}00651     memset(\&request, 0, \textcolor{keyword}{sizeof}(request));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00652}00652     request.Offset = m\_header.Segments[HEADER::SEGIDX\_ENTRYMETADATA].dwOffset;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00653}00653     request.hEvent = m\_event.get();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00654}00654 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00655}00655     wait = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00656}00656     \textcolor{keywordflow}{if} (!ReadFile(hFile.get(), m\_entries.get(), metadataBytes, \textcolor{keyword}{nullptr}, \&request))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00657}00657     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00658}00658         DWORD error = GetLastError();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00659}00659         \textcolor{keywordflow}{if} (error != ERROR\_IO\_PENDING)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00660}00660             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(error);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00661}00661         wait = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00662}00662     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00663}00663 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00664}00664 \textcolor{preprocessor}{\#if (\_WIN32\_WINNT >= \_WIN32\_WINNT\_WIN8)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00665}00665     result = GetOverlappedResultEx(hFile.get(), \&request, \&bytes, INFINITE, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00666}00666 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00667}00667     \textcolor{keywordflow}{if} (wait)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00668}00668         (void)WaitForSingleObject(m\_event.get(), INFINITE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00669}00669 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00670}00670     result = GetOverlappedResult(hFile.get(), \&request, \&bytes, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00671}00671 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00672}00672 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00673}00673     \textcolor{keywordflow}{if} (!result || (metadataBytes != bytes))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00674}00674     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00675}00675         \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00676}00676     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00677}00677 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00678}00678     \textcolor{comment}{// Load seek tables (XMA2 / xWMA)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00679}00679     DWORD seekLen = m\_header.Segments[HEADER::SEGIDX\_SEEKTABLES].dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00680}00680     \textcolor{keywordflow}{if} (seekLen > 0)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00681}00681     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00682}00682         m\_seekData.reset(\textcolor{keyword}{new} (std::nothrow) uint8\_t[seekLen]);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00683}00683         \textcolor{keywordflow}{if} (!m\_seekData)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00684}00684             \textcolor{keywordflow}{return} E\_OUTOFMEMORY;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00685}00685 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00686}00686         memset(\&request, 0, \textcolor{keyword}{sizeof}(OVERLAPPED));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00687}00687         request.Offset = m\_header.Segments[HEADER::SEGIDX\_SEEKTABLES].dwOffset;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00688}00688         request.hEvent = m\_event.get();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00689}00689 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00690}00690         wait = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00691}00691         \textcolor{keywordflow}{if} (!ReadFile(hFile.get(), m\_seekData.get(), seekLen, \textcolor{keyword}{nullptr}, \&request))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00692}00692         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00693}00693             DWORD error = GetLastError();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00694}00694             \textcolor{keywordflow}{if} (error != ERROR\_IO\_PENDING)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00695}00695                 \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(error);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00696}00696             wait = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00697}00697         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00698}00698 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00699}00699 \textcolor{preprocessor}{    \#if (\_WIN32\_WINNT >= \_WIN32\_WINNT\_WIN8)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00700}00700         result = GetOverlappedResultEx(hFile.get(), \&request, \&bytes, INFINITE, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00701}00701 \textcolor{preprocessor}{    \#else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00702}00702         \textcolor{keywordflow}{if} (wait)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00703}00703             (void)WaitForSingleObject(m\_event.get(), INFINITE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00704}00704 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00705}00705         result = GetOverlappedResult(hFile.get(), \&request, \&bytes, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00706}00706 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00707}00707 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00708}00708         \textcolor{keywordflow}{if} (!result || (seekLen != bytes))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00709}00709         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00710}00710             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00711}00711         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00712}00712 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00713}00713         \textcolor{keywordflow}{if} (be)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00714}00714         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00715}00715             \textcolor{keyword}{auto} ptr = \textcolor{keyword}{reinterpret\_cast<}uint32\_t*\textcolor{keyword}{>}(m\_seekData.get());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00716}00716             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < seekLen; j += 4, ++ptr)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00717}00717             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00718}00718                 *ptr = \_byteswap\_ulong(*ptr);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00719}00719             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00720}00720         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00721}00721     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00722}00722 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00723}00723     DWORD waveLen = m\_header.Segments[HEADER::SEGIDX\_ENTRYWAVEDATA].dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00724}00724     \textcolor{keywordflow}{if} (!waveLen)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00725}00725     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00726}00726         \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_NO\_DATA);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00727}00727     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00728}00728 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00729}00729     \textcolor{keywordflow}{if} (m\_data.dwFlags \& BANKDATA::TYPE\_STREAMING)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00730}00730     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00731}00731         \textcolor{comment}{// If streaming, reopen without buffering}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00732}00732         hFile.reset();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00733}00733 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00734}00734 \textcolor{preprocessor}{    \#if (\_WIN32\_WINNT >= \_WIN32\_WINNT\_WIN8)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00735}00735         CREATEFILE2\_EXTENDED\_PARAMETERS params2 = \{ \textcolor{keyword}{sizeof}(CREATEFILE2\_EXTENDED\_PARAMETERS), 0, 0, 0, \{\}, \textcolor{keyword}{nullptr} \};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00736}00736         params2.dwFileAttributes = FILE\_ATTRIBUTE\_NORMAL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00737}00737         params2.dwFileFlags = FILE\_FLAG\_OVERLAPPED | FILE\_FLAG\_NO\_BUFFERING;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00738}00738         m\_async = CreateFile2(szFileName,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00739}00739                               GENERIC\_READ,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00740}00740                               FILE\_SHARE\_READ,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00741}00741                               OPEN\_EXISTING,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00742}00742                               \&params2);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00743}00743 \textcolor{preprocessor}{    \#else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00744}00744         m\_async = CreateFileW(szFileName,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00745}00745                               GENERIC\_READ,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00746}00746                               FILE\_SHARE\_READ,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00747}00747                               \textcolor{keyword}{nullptr},}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00748}00748                               OPEN\_EXISTING,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00749}00749                               FILE\_FLAG\_OVERLAPPED | FILE\_FLAG\_NO\_BUFFERING,}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00750}00750                               \textcolor{keyword}{nullptr});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00751}00751 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00752}00752 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00753}00753         \textcolor{keywordflow}{if} (m\_async == INVALID\_HANDLE\_VALUE)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00754}00754         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00755}00755             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(GetLastError());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00756}00756         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00757}00757 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00758}00758         m\_prepared = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00759}00759     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00760}00760     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00761}00761     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00762}00762         \textcolor{comment}{// If in-\/memory, kick off read of wave data}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00763}00763         \textcolor{keywordtype}{void}* dest = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00764}00764 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00765}00765         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00766}00766             m\_waveData.reset(\textcolor{keyword}{new} (std::nothrow) uint8\_t[waveLen]);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00767}00767             \textcolor{keywordflow}{if} (!m\_waveData)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00768}00768                 \textcolor{keywordflow}{return} E\_OUTOFMEMORY;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00769}00769 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00770}00770             dest = m\_waveData.get();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00771}00771         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00772}00772 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00773}00773         memset(\&m\_request, 0, \textcolor{keyword}{sizeof}(OVERLAPPED));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00774}00774         m\_request.Offset = m\_header.Segments[HEADER::SEGIDX\_ENTRYWAVEDATA].dwOffset;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00775}00775         m\_request.hEvent = m\_event.get();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00776}00776 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00777}00777         \textcolor{keywordflow}{if} (!ReadFile(hFile.get(), dest, waveLen, \textcolor{keyword}{nullptr}, \&m\_request))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00778}00778         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00779}00779             DWORD error = GetLastError();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00780}00780             \textcolor{keywordflow}{if} (error != ERROR\_IO\_PENDING)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00781}00781                 \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(error);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00782}00782         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00783}00783         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00784}00784         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00785}00785             m\_prepared = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00786}00786             memset(\&m\_request, 0, \textcolor{keyword}{sizeof}(OVERLAPPED));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00787}00787         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00788}00788 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00789}00789         m\_async = hFile.release();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00790}00790     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00791}00791 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00792}00792     \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00793}00793 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00794}00794 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00795}00795 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00796}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a6562002e1eb7adbbf79abf81f0cc7296}{00796}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a6562002e1eb7adbbf79abf81f0cc7296}{WaveBankReader::Impl::Close}}() noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00797}00797 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00798}00798     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ab8f389a1facf854c0f4732dc13ec367e}{m\_async}} != INVALID\_HANDLE\_VALUE)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00799}00799     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00800}00800         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a3d37a0db5d9e58a48b896bd4ef8fe13c}{m\_request}}.hEvent)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00801}00801         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00802}00802             DWORD bytes;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00803}00803 \textcolor{preprocessor}{        \#if (\_WIN32\_WINNT >= \_WIN32\_WINNT\_WIN8)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00804}00804             (void)GetOverlappedResultEx(\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ab8f389a1facf854c0f4732dc13ec367e}{m\_async}}, \&\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a3d37a0db5d9e58a48b896bd4ef8fe13c}{m\_request}}, \&bytes, INFINITE, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00805}00805 \textcolor{preprocessor}{        \#else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00806}00806             (void)WaitForSingleObject(\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a3d37a0db5d9e58a48b896bd4ef8fe13c}{m\_request}}.hEvent, INFINITE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00807}00807 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00808}00808             (void)GetOverlappedResult(\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ab8f389a1facf854c0f4732dc13ec367e}{m\_async}}, \&\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a3d37a0db5d9e58a48b896bd4ef8fe13c}{m\_request}}, \&bytes, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00809}00809 \textcolor{preprocessor}{        \#endif}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00810}00810         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00811}00811 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00812}00812         CloseHandle(\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ab8f389a1facf854c0f4732dc13ec367e}{m\_async}});}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00813}00813         \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ab8f389a1facf854c0f4732dc13ec367e}{m\_async}} = INVALID\_HANDLE\_VALUE;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00814}00814     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00815}00815     \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_adf56e31e39352f85d3f913f08e0cfc3b}{m\_event}}.reset();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00816}00816 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00817}00817 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00818}00818 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00819}00819 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00820}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a97c95839347c8e53ee541021d718b967}{00820}} HRESULT \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a97c95839347c8e53ee541021d718b967}{WaveBankReader::Impl::GetFormat}}(uint32\_t index, WAVEFORMATEX* pFormat, \textcolor{keywordtype}{size\_t} maxsize) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00821}00821 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00822}00822     \textcolor{keywordflow}{if} (!pFormat || !maxsize)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00823}00823         \textcolor{keywordflow}{return} E\_INVALIDARG;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00824}00824 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00825}00825     \textcolor{keywordflow}{if} (index >= m\_data.dwEntryCount || !m\_entries)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00826}00826     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00827}00827         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00828}00828     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00829}00829 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00830}00830     \textcolor{keyword}{auto}\& miniFmt = (m\_data.dwFlags \& BANKDATA::FLAGS\_COMPACT) ? m\_data.CompactFormat : (\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }ENTRY*\textcolor{keyword}{>}(m\_entries.get())[index].Format);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00831}00831 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00832}00832     \textcolor{keywordflow}{switch} (miniFmt.wFormatTag)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00833}00833     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00834}00834         \textcolor{keywordflow}{case} MINIWAVEFORMAT::TAG\_PCM:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00835}00835             \textcolor{keywordflow}{if} (maxsize < \textcolor{keyword}{sizeof}(PCMWAVEFORMAT))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00836}00836                 \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_MORE\_DATA);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00837}00837 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00838}00838             pFormat-\/>wFormatTag = WAVE\_FORMAT\_PCM;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00839}00839 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00840}00840             \textcolor{keywordflow}{if} (maxsize >= \textcolor{keyword}{sizeof}(WAVEFORMATEX))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00841}00841             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00842}00842                 pFormat-\/>cbSize = 0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00843}00843             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00844}00844             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00845}00845 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00846}00846         \textcolor{keywordflow}{case} MINIWAVEFORMAT::TAG\_ADPCM:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00847}00847             \textcolor{keywordflow}{if} (maxsize < (\textcolor{keyword}{sizeof}(WAVEFORMATEX) + 32 \textcolor{comment}{/*MSADPCM\_FORMAT\_EXTRA\_BYTES*/}))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00848}00848                 \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_MORE\_DATA);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00849}00849 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00850}00850             pFormat-\/>wFormatTag = WAVE\_FORMAT\_ADPCM;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00851}00851             pFormat-\/>cbSize = 32 \textcolor{comment}{/*MSADPCM\_FORMAT\_EXTRA\_BYTES*/};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00852}00852             \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00853}00853                 \textcolor{keyword}{auto} adpcmFmt = \textcolor{keyword}{reinterpret\_cast<}ADPCMWAVEFORMAT*\textcolor{keyword}{>}(pFormat);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00854}00854                 adpcmFmt-\/>wSamplesPerBlock = \textcolor{keyword}{static\_cast<}WORD\textcolor{keyword}{>}(miniFmt.AdpcmSamplesPerBlock());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00855}00855                 miniFmt.AdpcmFillCoefficientTable(adpcmFmt);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00856}00856             \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00857}00857             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00858}00858 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00859}00859         \textcolor{keywordflow}{case} MINIWAVEFORMAT::TAG\_WMA:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00860}00860             \textcolor{keywordflow}{if} (maxsize < \textcolor{keyword}{sizeof}(WAVEFORMATEX))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00861}00861                 \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_MORE\_DATA);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00862}00862 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00863}00863             pFormat-\/>wFormatTag = \textcolor{keyword}{static\_cast<}WORD\textcolor{keyword}{>}((miniFmt.wBitsPerSample \& 0x1) ? WAVE\_FORMAT\_WMAUDIO3 : WAVE\_FORMAT\_WMAUDIO2);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00864}00864             pFormat-\/>cbSize = 0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00865}00865             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00866}00866 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00867}00867         \textcolor{keywordflow}{case} MINIWAVEFORMAT::TAG\_XMA: \textcolor{comment}{// XMA2 is supported by Xbox One}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00868}00868             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_NOT\_SUPPORTED);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00869}00869 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00870}00870         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00871}00871             \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00872}00872     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00873}00873 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00874}00874     pFormat-\/>nChannels = miniFmt.nChannels;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00875}00875     pFormat-\/>wBitsPerSample = miniFmt.BitsPerSample();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00876}00876     pFormat-\/>nBlockAlign = \textcolor{keyword}{static\_cast<}WORD\textcolor{keyword}{>}(miniFmt.BlockAlign());}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00877}00877     pFormat-\/>nSamplesPerSec = miniFmt.nSamplesPerSec;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00878}00878     pFormat-\/>nAvgBytesPerSec = miniFmt.AvgBytesPerSec();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00879}00879 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00880}00880     \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00881}00881 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00882}00882 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00883}00883 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00884}00884 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00885}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a36f2ebfa1756a997d2627c8e5039d822}{00885}} HRESULT \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a36f2ebfa1756a997d2627c8e5039d822}{WaveBankReader::Impl::GetWaveData}}(uint32\_t index, \textcolor{keyword}{const} uint8\_t** pData, uint32\_t\& dataSize) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00886}00886 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00887}00887     \textcolor{keywordflow}{if} (!pData)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00888}00888         \textcolor{keywordflow}{return} E\_INVALIDARG;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00889}00889 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00890}00890     \textcolor{keywordflow}{if} (index >= m\_data.dwEntryCount || !m\_entries)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00891}00891     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00892}00892         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00893}00893     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00894}00894 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00895}00895     \textcolor{keyword}{const} uint8\_t* waveData = m\_waveData.get();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00896}00896 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00897}00897     \textcolor{keywordflow}{if} (!waveData)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00898}00898         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00899}00899 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00900}00900     \textcolor{keywordflow}{if} (m\_data.dwFlags \& BANKDATA::TYPE\_STREAMING)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00901}00901     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00902}00902         \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_NOT\_SUPPORTED);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00903}00903     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00904}00904 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00905}00905     \textcolor{keywordflow}{if} (!m\_prepared)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00906}00906     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00907}00907         \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_IO\_INCOMPLETE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00908}00908     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00909}00909 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00910}00910     \textcolor{keywordflow}{if} (m\_data.dwFlags \& BANKDATA::FLAGS\_COMPACT)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00911}00911     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00912}00912         \textcolor{keyword}{auto}\& entry = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }ENTRYCOMPACT*\textcolor{keyword}{>}(m\_entries.get())[index];}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00913}00913 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00914}00914         DWORD dwOffset, dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00915}00915         entry.ComputeLocations(dwOffset, dwLength, index, m\_header, m\_data, \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }ENTRYCOMPACT*\textcolor{keyword}{>}(m\_entries.get()));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00916}00916 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00917}00917         \textcolor{keywordflow}{if} ((uint64\_t(dwOffset) + uint64\_t(dwLength)) > uint64\_t(m\_header.Segments[HEADER::SEGIDX\_ENTRYWAVEDATA].dwLength))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00918}00918         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00919}00919             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00920}00920         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00921}00921 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00922}00922         *pData = \&waveData[dwOffset];}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00923}00923         dataSize = dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00924}00924     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00925}00925     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00926}00926     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00927}00927         \textcolor{keyword}{auto}\& entry = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }ENTRY*\textcolor{keyword}{>}(m\_entries.get())[index];}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00928}00928 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00929}00929         \textcolor{keywordflow}{if} ((uint64\_t(entry.PlayRegion.dwOffset) + uint64\_t(entry.PlayRegion.dwLength)) > uint64\_t(m\_header.Segments[HEADER::SEGIDX\_ENTRYWAVEDATA].dwLength))}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00930}00930         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00931}00931             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_HANDLE\_EOF);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00932}00932         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00933}00933 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00934}00934         *pData = \&waveData[entry.PlayRegion.dwOffset];}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00935}00935         dataSize = entry.PlayRegion.dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00936}00936     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00937}00937 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00938}00938     \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00939}00939 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00940}00940 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00941}00941 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00942}00942 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00943}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ad18bb2b866fad22bdf54ab4748a5f5b5}{00943}} HRESULT \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_ad18bb2b866fad22bdf54ab4748a5f5b5}{WaveBankReader::Impl::GetSeekTable}}(uint32\_t index, \textcolor{keyword}{const} uint32\_t** pData, uint32\_t\& dataCount, uint32\_t\& tag) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00944}00944 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00945}00945     \textcolor{keywordflow}{if} (!pData)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00946}00946         \textcolor{keywordflow}{return} E\_INVALIDARG;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00947}00947 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00948}00948     *pData = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00949}00949     dataCount = 0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00950}00950     tag = 0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00951}00951 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00952}00952     \textcolor{keywordflow}{if} (index >= m\_data.dwEntryCount || !m\_entries)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00953}00953     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00954}00954         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00955}00955     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00956}00956 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00957}00957     \textcolor{keywordflow}{if} (!m\_seekData)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00958}00958         \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00959}00959 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00960}00960     \textcolor{keyword}{auto}\& miniFmt = (m\_data.dwFlags \& BANKDATA::FLAGS\_COMPACT) ? m\_data.CompactFormat : (\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }ENTRY*\textcolor{keyword}{>}(m\_entries.get())[index].Format);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00961}00961 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00962}00962     \textcolor{keywordflow}{switch} (miniFmt.wFormatTag)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00963}00963     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00964}00964         \textcolor{keywordflow}{case} MINIWAVEFORMAT::TAG\_WMA:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00965}00965             tag = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}((miniFmt.wBitsPerSample \& 0x1) ? WAVE\_FORMAT\_WMAUDIO3 : WAVE\_FORMAT\_WMAUDIO2);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00966}00966             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00967}00967 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00968}00968         \textcolor{keywordflow}{case} MINIWAVEFORMAT::TAG\_XMA:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00969}00969             tag = 0x166 \textcolor{comment}{/* WAVE\_FORMAT\_XMA2 */};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00970}00970             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00971}00971 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00972}00972         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00973}00973             \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00974}00974     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00975}00975 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00976}00976     \textcolor{keyword}{auto} seekTable = FindSeekTable(index, m\_seekData.get(), m\_header, m\_data);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00977}00977     \textcolor{keywordflow}{if} (!seekTable)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00978}00978         \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00979}00979 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00980}00980     dataCount = *seekTable;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00981}00981     *pData = seekTable + 1;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00982}00982 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00983}00983     \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00984}00984 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00985}00985 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00986}00986 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00987}00987 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00988}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a2df251e4ec08b21f4197648a539cbbaa}{00988}} HRESULT \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a2df251e4ec08b21f4197648a539cbbaa}{WaveBankReader::Impl::GetMetadata}}(uint32\_t index, \mbox{\hyperlink{struct_direct_x_1_1_wave_bank_reader_1_1_metadata}{Metadata}}\& metadata) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00989}00989 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00990}00990     \textcolor{keywordflow}{if} (index >= m\_data.dwEntryCount || !m\_entries)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00991}00991     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00992}00992         \textcolor{keywordflow}{return} E\_FAIL;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00993}00993     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00994}00994 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00995}00995     \textcolor{keywordflow}{if} (m\_data.dwFlags \& BANKDATA::FLAGS\_COMPACT)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00996}00996     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00997}00997         \textcolor{keyword}{auto}\& entry = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }ENTRYCOMPACT*\textcolor{keyword}{>}(m\_entries.get())[index];}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00998}00998 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l00999}00999         DWORD dwOffset, dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01000}01000         entry.ComputeLocations(dwOffset, dwLength, index, m\_header, m\_data, \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }ENTRYCOMPACT*\textcolor{keyword}{>}(m\_entries.get()));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01001}01001 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01002}01002         \textcolor{keyword}{auto} seekTable = FindSeekTable(index, m\_seekData.get(), m\_header, m\_data);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01003}01003         metadata.duration = entry.GetDuration(dwLength, m\_data, seekTable);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01004}01004         metadata.loopStart = metadata.loopLength = 0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01005}01005         metadata.offsetBytes = dwOffset;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01006}01006         metadata.lengthBytes = dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01007}01007     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01008}01008     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01009}01009     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01010}01010         \textcolor{keyword}{auto}\& entry = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }ENTRY*\textcolor{keyword}{>}(m\_entries.get())[index];}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01011}01011 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01012}01012         metadata.duration = entry.Duration;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01013}01013         metadata.loopStart = entry.LoopRegion.dwStartSample;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01014}01014         metadata.loopLength = entry.LoopRegion.dwTotalSamples;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01015}01015         metadata.offsetBytes = entry.PlayRegion.dwOffset;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01016}01016         metadata.lengthBytes = entry.PlayRegion.dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01017}01017     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01018}01018 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01019}01019     \textcolor{keywordflow}{if} (m\_data.dwFlags \& BANKDATA::TYPE\_STREAMING)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01020}01020     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01021}01021         uint64\_t offset = uint64\_t(metadata.offsetBytes) + uint64\_t(m\_header.Segments[HEADER::SEGIDX\_ENTRYWAVEDATA].dwOffset);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01022}01022         \textcolor{keywordflow}{if} (offset > UINT32\_MAX)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01023}01023             \textcolor{keywordflow}{return} HRESULT\_FROM\_WIN32(ERROR\_ARITHMETIC\_OVERFLOW);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01024}01024 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01025}01025         metadata.offsetBytes = \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(offset);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01026}01026     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01027}01027 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01028}01028     \textcolor{keywordflow}{return} S\_OK;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01029}01029 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01030}01030 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01031}01031 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01032}\mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a8346f9a62338fd734672d89dc9cc6007}{01032}} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_wave_bank_reader_1_1_impl_a8346f9a62338fd734672d89dc9cc6007}{WaveBankReader::Impl::UpdatePrepared}}() noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01033}01033 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01034}01034     \textcolor{keywordflow}{if} (m\_prepared)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01035}01035         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01036}01036 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01037}01037     \textcolor{keywordflow}{if} (m\_async == INVALID\_HANDLE\_VALUE)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01038}01038         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01039}01039 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01040}01040     \textcolor{keywordflow}{if} (m\_request.hEvent)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01041}01041     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01042}01042 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01043}01043 \textcolor{preprocessor}{    \#if (\_WIN32\_WINNT >= \_WIN32\_WINNT\_WIN8)}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01044}01044         DWORD bytes;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01045}01045         BOOL result = GetOverlappedResultEx(m\_async, \&m\_request, \&bytes, 0, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01046}01046 \textcolor{preprocessor}{    \#else}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01047}01047         \textcolor{keywordtype}{bool} result = HasOverlappedIoCompleted(\&m\_request);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01048}01048 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01049}01049         \textcolor{keywordflow}{if} (result)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01050}01050         \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01051}01051             m\_prepared = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01052}01052 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01053}01053             memset(\&m\_request, 0, \textcolor{keyword}{sizeof}(OVERLAPPED));}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01054}01054         \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01055}01055     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01056}01056 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01057}01057     \textcolor{keywordflow}{return} m\_prepared;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01058}01058 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01059}01059 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01060}01060 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01061}01061 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01062}01062 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01063}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_ac5305dc261b2d1909c6ce320a2233047}{01063}} WaveBankReader::WaveBankReader() noexcept(false) :}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01064}01064     pImpl(std::make\_unique<\mbox{\hyperlink{class_wave_bank_reader_1_1_impl}{Impl}}>())}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01065}01065 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01066}01066 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01067}01067 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01068}01068 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01069}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_abe7cc7e0686e0c6afc4f685c5d254f5b}{01069}} WaveBankReader::\string~WaveBankReader()}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01070}01070 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01071}01071 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01072}01072 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01073}01073 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01074}01074 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01075}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_a2ec9adf03d35e11cf51a13b12c54b6b2}{01075}} HRESULT WaveBankReader::Open(\textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t}* szFileName) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01076}01076 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01077}01077     \textcolor{keywordflow}{return} pImpl-\/>Open(szFileName);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01078}01078 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01079}01079 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01080}01080 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01081}01081 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01082}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_adcf1feede1070887cfdcb6fbc3416a7c}{01082}} uint32\_t WaveBankReader::Find(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* name)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01083}01083 \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01084}01084     \textcolor{keyword}{auto} it = pImpl-\/>m\_names.find(name);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01085}01085     \textcolor{keywordflow}{if} (it != pImpl-\/>m\_names.cend())}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01086}01086     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01087}01087         \textcolor{keywordflow}{return} it-\/>second;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01088}01088     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01089}01089 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01090}01090     \textcolor{keywordflow}{return} uint32\_t(-\/1);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01091}01091 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01092}01092 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01093}01093 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01094}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_a3555288de20069e25eaecc85dd256555}{01094}} \textcolor{keywordtype}{bool} WaveBankReader::IsPrepared() noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01095}01095 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01096}01096     \textcolor{keywordflow}{if} (pImpl-\/>m\_prepared)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01097}01097         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01098}01098 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01099}01099     \textcolor{keywordflow}{return} pImpl-\/>UpdatePrepared();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01100}01100 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01101}01101 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01102}01102 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01103}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_a3a1e4c9f86b27da3d51dbff448fffd09}{01103}} \textcolor{keywordtype}{void} WaveBankReader::WaitOnPrepare() noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01104}01104 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01105}01105     \textcolor{keywordflow}{if} (pImpl-\/>m\_prepared)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01106}01106         \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01107}01107 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01108}01108     \textcolor{keywordflow}{if} (pImpl-\/>m\_request.hEvent)}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01109}01109     \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01110}01110         (void)WaitForSingleObjectEx(pImpl-\/>m\_request.hEvent, INFINITE, FALSE);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01111}01111 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01112}01112         pImpl-\/>UpdatePrepared();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01113}01113     \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01114}01114 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01115}01115 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01116}01116 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01117}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_a134f8ace8cde4cab12e64f0abbb685e1}{01117}} \textcolor{keywordtype}{bool} WaveBankReader::HasNames() const noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01118}01118 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01119}01119     \textcolor{keywordflow}{return} !pImpl-\/>m\_names.empty();}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01120}01120 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01121}01121 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01122}01122 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01123}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_aaa5e6b8e0e0e80a143499c9481f3d460}{01123}} \textcolor{keywordtype}{bool} WaveBankReader::IsStreamingBank() const noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01124}01124 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01125}01125     \textcolor{keywordflow}{return} (pImpl-\/>m\_data.dwFlags  \& BANKDATA::TYPE\_STREAMING) != 0;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01126}01126 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01127}01127 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01128}01128 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01129}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_ab584b9653c114a5ab1f3f194c08db471}{01129}} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* WaveBankReader::BankName() const noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01130}01130 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01131}01131     \textcolor{keywordflow}{return} pImpl-\/>m\_data.szBankName;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01132}01132 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01133}01133 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01134}01134 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01135}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_a519664a5a3e389664a5192e026e418b5}{01135}} uint32\_t \mbox{\hyperlink{namespace_player_action_abc541606b807d19f360a066ab7e1e268ad7d8c7c8c9c9f022de8c9ea3af8a535b}{WaveBankReader::Count}}() const noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01136}01136 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01137}01137     \textcolor{keywordflow}{return} pImpl-\/>m\_data.dwEntryCount;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01138}01138 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01139}01139 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01140}01140 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01141}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_a2ad7b1978f51ae2e2cea7481afec441a}{01141}} uint32\_t WaveBankReader::BankAudioSize() const noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01142}01142 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01143}01143     \textcolor{keywordflow}{return} pImpl-\/>m\_header.Segments[HEADER::SEGIDX\_ENTRYWAVEDATA].dwLength;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01144}01144 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01145}01145 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01146}01146 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01147}01147 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01148}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_a50ed0b658fddf6af82f9fc74e96c5b7a}{01148}} HRESULT WaveBankReader::GetFormat(uint32\_t index, WAVEFORMATEX* pFormat, \textcolor{keywordtype}{size\_t} maxsize) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01149}01149 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01150}01150     \textcolor{keywordflow}{return} pImpl-\/>GetFormat(index, pFormat, maxsize);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01151}01151 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01152}01152 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01153}01153 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01154}01154 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01155}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_a744a2c4bd5b6d690be26424c16786836}{01155}} HRESULT WaveBankReader::GetWaveData(uint32\_t index, \textcolor{keyword}{const} uint8\_t** pData, uint32\_t\& dataSize) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01156}01156 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01157}01157     \textcolor{keywordflow}{return} pImpl-\/>GetWaveData(index, pData, dataSize);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01158}01158 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01159}01159 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01160}01160 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01161}01161 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01162}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_aca78da05279aab92f0b0f83d65f4c1cf}{01162}} HRESULT WaveBankReader::GetSeekTable(uint32\_t index, \textcolor{keyword}{const} uint32\_t** pData, uint32\_t\& dataCount, uint32\_t\& tag) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01163}01163 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01164}01164     \textcolor{keywordflow}{return} pImpl-\/>GetSeekTable(index, pData, dataCount, tag);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01165}01165 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01166}01166 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01167}01167 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01168}01168 \mbox{\hyperlink{_d_d_s_texture_loader_8h_a3150346626fcea3ad7afe5dfb4ce27d8}{\_Use\_decl\_annotations\_}}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01169}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_ae3e4fedea9f72088cf9241b08f622312}{01169}} HRESULT WaveBankReader::GetMetadata(uint32\_t index, \mbox{\hyperlink{struct_direct_x_1_1_wave_bank_reader_1_1_metadata}{Metadata}}\& metadata) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01170}01170 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01171}01171     \textcolor{keywordflow}{return} pImpl-\/>GetMetadata(index, metadata);}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01172}01172 \}}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01173}01173 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01174}01174 }
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01175}\mbox{\hyperlink{class_direct_x_1_1_wave_bank_reader_a65814e765c107e614830b939bdbe4c86}{01175}} HANDLE WaveBankReader::GetAsyncHandle() const noexcept}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01176}01176 \{}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01177}01177     \textcolor{keywordflow}{return} (pImpl-\/>m\_data.dwFlags \& BANKDATA::TYPE\_STREAMING) ? pImpl-\/>m\_async : INVALID\_HANDLE\_VALUE;}
\DoxyCodeLine{\Hypertarget{_wave_bank_reader_8cpp_source_l01178}01178 \}}

\end{DoxyCode}
